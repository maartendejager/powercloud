<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerCloud Extension Popup Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .popup-preview {
            width: 400px;
            height: 600px;
            border: 1px solid #ccc;
            overflow: hidden;
        }
        .test-url {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            margin: 10px 0;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>PowerCloud Extension Popup Test</h1>
    
    <div class="test-section">
        <h2>Testing Summary</h2>
        <div class="status success">✅ Implementation Complete</div>
        <p>The PowerCloud extension has been successfully updated with the following features:</p>
        <ul>
            <li><strong>Page Actions Tab</strong>: Now the default leftmost tab</li>
            <li><strong>Always Available Buttons</strong>: Extension buttons display in popup regardless of toggle setting</li>
            <li><strong>Page Context Detection</strong>: Automatically detects card, book, and entries pages</li>
            <li><strong>Action Results</strong>: Real-time feedback for button clicks</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Test URLs for Different Page Types</h2>
        <div class="status info">Use these URLs to test different page contexts:</div>
        
        <h3>Card Pages:</h3>
        <div class="test-url">https://app.spend.cloud/card/details/12345</div>
        <div class="test-url">https://app.spend.cloud/card/view/67890</div>
        
        <h3>Book Pages:</h3>
        <div class="test-url">https://app.spend.cloud/book/overview/12345</div>
        <div class="test-url">https://app.spend.cloud/book/details/67890</div>
        
        <h3>Entries Pages:</h3>
        <div class="test-url">https://app.spend.cloud/entries/12345</div>
        <div class="test-url">https://app.spend.cloud/entries/view/67890</div>
        
        <h3>Other Pages (No Actions):</h3>
        <div class="test-url">https://app.spend.cloud/dashboard</div>
        <div class="test-url">https://app.spend.cloud/settings</div>
    </div>

    <div class="test-section">
        <h2>Manual Testing Steps</h2>
        <ol>
            <li><strong>Load Extension</strong>:
                <ul>
                    <li>Open Chrome and go to <code>chrome://extensions/</code></li>
                    <li>Enable "Developer mode"</li>
                    <li>Click "Load unpacked" and select the PowerCloud directory</li>
                </ul>
            </li>
            <li><strong>Test Page Actions Tab</strong>:
                <ul>
                    <li>Navigate to any of the test URLs above</li>
                    <li>Click the PowerCloud extension icon</li>
                    <li>Verify "Page Actions" is the default active tab (leftmost)</li>
                    <li>Check that appropriate page context is detected</li>
                </ul>
            </li>
            <li><strong>Test Button Functionality</strong>:
                <ul>
                    <li>On card pages: Verify "View Card in Adyen" button appears</li>
                    <li>On book pages: Verify "View Balance Account in Adyen" button appears</li>
                    <li>On entries pages: Verify "View Transfer in Adyen" button appears</li>
                    <li>Click buttons and verify result messages appear</li>
                </ul>
            </li>
            <li><strong>Test Toggle Independence</strong>:
                <ul>
                    <li>Go to Auth Tokens tab and toggle "Show buttons on page"</li>
                    <li>Return to Page Actions tab</li>
                    <li>Verify buttons still appear regardless of toggle state</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="test-section">
        <h2>Expected Behavior</h2>
        <ul>
            <li>✅ Page Actions tab should be the leftmost and default active tab</li>
            <li>✅ Page context should be automatically detected and displayed</li>
            <li>✅ Appropriate action buttons should appear based on page type</li>
            <li>✅ Buttons should work regardless of the "show buttons on page" toggle</li>
            <li>✅ Click results should display success/error messages</li>
            <li>✅ No actions message should appear on non-supported pages</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Files Modified</h2>
        <ul>
            <li><code>popup/popup.html</code> - Added Page Actions tab content and reordered tabs</li>
            <li><code>popup/popup.css</code> - Added styling for action groups and results</li>
            <li><code>popup/popup.js</code> - Implemented page detection and button functionality</li>
        </ul>
    </div>
</body>
</html>
