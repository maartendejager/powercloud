<!DOCTYPE html>
<html>
<head>
  <title>PowerCloud Extension Module Test</title>
</head>
<body>
  <h1>PowerCloud Extension Module Test</h1>
  <div id="results"></div>

  <!-- Test content script loading (traditional script) -->
  <script src="shared/url-patterns.js"></script>
  
  <!-- Test ES6 module loading -->
  <script type="module">
    import { isApiRoute, categorizeUrl, CARD_PATTERNS } from './shared/url-patterns-module.js';
    
    const results = document.getElementById('results');
    
    function addResult(message, isSuccess = true) {
      const div = document.createElement('div');
      div.style.color = isSuccess ? 'green' : 'red';
      div.style.fontFamily = 'monospace';
      div.textContent = message;
      results.appendChild(div);
    }
    
    try {
      // Test 1: Content script context (window exports)
      if (typeof window.isApiRoute === 'function') {
        addResult('‚úÖ Content script exports working');
        
        const testUrl = 'https://test.spend.cloud/api/test';
        const isApi = window.isApiRoute(testUrl);
        addResult(`‚úÖ window.isApiRoute('${testUrl}') = ${isApi}`);
      } else {
        addResult('‚ùå Content script exports missing', false);
      }
      
      // Test 2: ES6 module imports
      if (typeof isApiRoute === 'function') {
        addResult('‚úÖ ES6 module imports working');
        
        const testUrl = 'https://test.spend.cloud/api/test';
        const isApi = isApiRoute(testUrl);
        addResult(`‚úÖ isApiRoute('${testUrl}') = ${isApi}`);
        
        const cardUrl = 'https://customer.spend.cloud/administration/cards';
        const category = categorizeUrl(cardUrl);
        addResult(`‚úÖ categorizeUrl('${cardUrl}') = ${category}`);
        
        addResult(`‚úÖ CARD_PATTERNS available: ${JSON.stringify(Object.keys(CARD_PATTERNS))}`);
      } else {
        addResult('‚ùå ES6 module imports failed', false);
      }
      
      addResult('üéâ All tests completed!');
      
    } catch (error) {
      addResult(`‚ùå Test error: ${error.message}`, false);
    }
  </script>
</body>
</html>
